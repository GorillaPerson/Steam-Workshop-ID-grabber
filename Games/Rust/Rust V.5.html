<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Rust Pilot - Workshop IDs Scraper">
    <title>Rust Pilot</title>
    <script>
        // Function to call the server-side scrapeSteamWorkshop function
        function fetchWorkshopIds() {
            clearLog();
            logMessage("Starting workshop scraping...");

            google.script.run
                .withSuccessHandler(displayWorkshopIds)
                .withFailureHandler(showError)
                .scrapeSteamWorkshop();
        }

        // Function to display the final result or IDs returned from the server
        function displayWorkshopIds(result) {
            logMessage("Last Output: " + result.lastOutput);
            const outputDiv = document.getElementById("workshop-ids");
            outputDiv.innerHTML = "Workshop IDs: " + result.ids.join(", ");
        }

        // Function to log the last output message
        function logMessage(message) {
            const logDiv = document.getElementById("log");
            logDiv.innerHTML = message;
        }

        // Function to clear the log
        function clearLog() {
            document.getElementById("log").innerHTML = "";
        }

        // Function to handle errors
        function showError(error) {
            logMessage("Error: " + error.message);
        }
    </script>
</head>
<body>
    <header>
        <h1>Rust Pilot</h1>
        <h2>Workshop IDs Scraper</h2>
    </header>
    <main>
        <p>Welcome to the Rust Pilot - Workshop IDs Scraper. Use this tool to easily scrape and manage workshop IDs.</p>
        <!-- Button to fetch workshop IDs -->
        <button onclick="fetchWorkshopIds()">Start Scraping</button>
        <!-- Div to display the fetched IDs -->
        <div id="workshop-ids"></div>
        <!-- Div to log the last output -->
        <div id="log" style="border: 1px solid #ccc; padding: 10px; margin-top: 20px;">
            <strong>Log:</strong> <span id="lastOutput">Awaiting output...</span>
        </div>
    </main>
</body>
</html>
